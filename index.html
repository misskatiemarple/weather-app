<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Weather App Plus</title>

    <script
      src="https://kit.fontawesome.com/49bef2d35b.js"
      crossorigin="anonymous"
    ></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <style>

      body {
font-family: Roboto;
      }
      weather-app-wrapper {
        max-width: 600px;
        margin: 30px auto;
        padding: 20px;
      }
      h1{
        color: black;
        font-size: 24px;
        line-height: 28px;
      }
      ul{
        margin: 0;
        padding: 0;
      }

      li {
        list-style: none;
        margin: 0;
        padding: 0; 
        font-size: 16px;
        line-height: 19px;
        color: black;
      }
      li:first-letter {
  text-transform: capitalize;
}
      .container {
        border: solid 1px;
        border-color: rgb(34, 34, 34);
        border-radius: 5px;
      }
      
      .currentTemperature {
        color: black;
        font-size: 64px;
        line-height: 1;
      }
      .unit-links {
       
      }
      .active{
        color: rgb(33, 33, 33);
        cursor: default;
      }
      .weekdays {
        font-family: Oswald;
        font-size: 30px;
        text-align: center;
      }
      .week-icons {
        text-align: center;
        font-size: 50px;
        color: #2a7ea3;
      }
      .week-icons p {
        font-size: 15px;
        color: black;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="weather-app-wrapper">
        <div class = weather-app>
          <form id="search-form" class="mb-3">
         // <div class="search">
            <div class="row">
              <div class="col-3">
                <input
                  type="search"
                  placeholder="Change City..."
                  autocomplete="off"
                  id="searchtextinput"
                />
                   </div>
                <div class="col-3">
                  <input
                    type="submit"
                    value="Search"
                    class="bt btn-primary w-100"
                    id="searchbutton"
                  />
  </div>
                  <div class="col-3">
                    <input 
                    type="submit"
                    value ="Current Location"
                    class="bn btn-primary w-100"
                    id="geoSearchButton"
                    />
         </div>
         </div>
          </form>

        <div class="container text-center">
          <div class="row">
            <div class="col-6">

              <h1 id="city"></h1>
                <ul>
                  <li ><small>Last updated:</small>
                    <div class="date-time" id="date-time"></div></li>
                  <li id = "today"></li>  
                  <li id = "description"></li>
                </ul>

<div class = "row">
  <div class="col-6">
    <div class ="d-flex todays-temperature">
      <img src="#" alt="clear" id="icon"/>
                <span class="currentTemperature" id="current-temperature"
                  ></span>
                <span class="unit-links"
                  ><a href="#" id="celsius-link" class ="active">°C</a> |
                  <a href="#" id="fahrenheit-link">°F</a></span
                >
              </div>
            </div>
            </div>
</div>
            <div class="col -6">
              <div class="outfit">
                <div class="card text-center">
                  <div class="card-header"><h5>What to wear...</h5></div>
                  <div class="card-body">
                    <p class="card-text">
                      A  muffler with a mid-length jacket and knee-high
                      boots
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="weekdays">
          <div class="row">
            <div class="col-2">Tue</div>
            <div class="col-2">Wed</div>
            <div class="col-2">Thurs</div>
            <div class="col-2">Fri</div>
            <div class="col-2">Sat</div>
            <div class="col-2">Sun</div>
          </div>
        </div>
        <div class="week-icons">
          <div class="row">
            <div class="col-2">
              <i class="fa-solid fa-cloud-showers-heavy"></i>
              <p>9°C</p>
            </div>
            <div class="col-2">
              <i class="fa-solid fa-cloud-sun-rain"></i>
              <p>6°C</p>
            </div>
            <div class="col-2">
              <i class="fa-solid fa-cloud-sun"></i>
              <p>3°C</p>
            </div>
            <div class="col-2">
              <i class="fa-regular fa-sun"></i>
              <p>13°C</p>
            </div>
            <div class="col-2">
              <i class="fa-regular fa-sun"></i>
              <p>12°C</p>
            </div>
            <div class="col-2">
              <i class="fa-solid fa-cloud"></i>
              <p>10°C</p>
            </div>
          </div>
        </div>
        <small
          ><a href="https://github.com/misskatiemarple/weather-app"
            >Open-source code</a
          >
          by Katie Marple</small
        >
      </div>
      </div>
    </div>
    <script>
      function formatDate(now) {
        let date = now.getDate();
        let hours = now.getHours();
        if (hours < 10) {
          hours = `0${hours}`;
        }
        let minutes = now.getMinutes();
        if (minutes < 10) {
          minutes = `0${minutes}`;
        }

        let dayIndex = now.getDay();
        let days = [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
        ];
        let day = days[dayIndex];
        return `${day} ${date}, ${hours}:${minutes}`;
      }
      let dateElement = document.querySelector("#date-time");
      let currentTime = new Date();
      dateElement.innerHTML = formatDate(currentTime);

      function searchCity(event) {
        event.preventDefault();
        let apiKey = "8ffdae83372dae3b32b16f61153232ca";
        let cityElement = document.querySelector("#city");
        let cityInput = document.querySelector("#searchtextinput");
        cityElement.innerHTML = cityInput.value;
        let apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${cityInput}&units=metric&appid=${apiKey}`;
        axios.get(apiUrl).then(showChange);
      }

      let searchButton = document.querySelector("#search-form");
      searchButton.addEventListener("submit", searchCity);

      function showChange(response) {
        console.log(response.data);
        let tempElementChange = document.querySelector("#current-temperature");
        let locationTemperature = Math.round(response.data.main.temp);
        tempElementChange.innerHTML = `${locationTemperature}`;

        let cityElementChange = document.querySelector("#city");
        cityElementChange.innerHTML = response.data.name;
      }

      function getGeoPosition(event) {
        event.preventDefault();
        navigator.geolocation.getCurrentPosition(showGeoPosition);
      }
      function showGeoPosition(position) {
        let apiKey = "8ffdae83372dae3b32b16f61153232ca";
        let latitude = position.coords.latitude;
        let longitude = position.coords.longitude;
        let url = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&units=metric&appid=${apiKey}`;
        axios.get(url).then(showChange);
      }
      let geoButton = document.querySelector("#geoSearchButton");
      geoButton.addEventListener("click", getGeoPosition);

      function convertToFahrenheit(event) {
        event.preventDefault();
        let fahrenheitElement = document.querySelector("#temperature");
        fahrenheitElement.innerHTML = 66;
      }

      function convertToCelsius(event) {
        event.preventDefault();
        let celsiusElement = document.querySelector("#temperature");
        celsiusElement.innerHTML = 19;
      }

      let fahrenheitLink = document.querySelector("#fahrenheit-link");
      fahrenheitLink.addEventListener("click", convertToFahrenheit);

      let celsiusLink = document.querySelector("#celsius-link");
      celsiusLink.addEventListener("click", convertToCelsius);
    </script>
  </body>
</html>
